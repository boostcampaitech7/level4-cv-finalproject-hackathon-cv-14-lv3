{
  "name": "Trend-Workflow",
  "nodes": [
    {
      "parameters": {
        "text": "={{ $json.query }} {{ $json.chatInput }} {{ $json[\"body\"][\"chatInput\"] }} {{ $node[\"Webhook\"].json[\"body\"][\"chatInput\"] }}",
        "schemaType": "manual",
        "inputSchema": "{\n \"type\": \"object\",\n \"properties\": {\n   \"startDate\": {\n     \"type\": \"string\",\n     \"description\": \"ì¡°íšŒ ì‹œì‘ ë‚ ì§œ (YYYY-MM-DD í˜•ì‹, 2016-01-01ë¶€í„° ê°€ëŠ¥)\"\n   },\n   \"endDate\": {\n     \"type\": \"string\", \n     \"description\": \"ì¡°íšŒ ì¢…ë£Œ ë‚ ì§œ (YYYY-MM-DD í˜•ì‹)\"\n   },\n   \"timeUnit\": {\n     \"type\": \"string\",\n     \"enum\": [\"date\", \"week\", \"month\"],\n     \"default\": \"month\",\n     \"description\": \"ì¡°íšŒ êµ¬ê°„ ë‹¨ìœ„ (date: ì¼ê°„, week: ì£¼ê°„, month: ì›”ê°„)\"\n   },\n   \"keywordGroups\": {\n     \"type\": \"array\",\n     \"maxItems\": 5,\n     \"items\": {\n       \"type\": \"object\",\n       \"properties\": {\n         \"groupName\": {\n           \"type\": \"string\",\n           \"description\": \"ì£¼ì œì–´ ê·¸ë£¹ëª…\"\n         },\n         \"keywords\": {\n           \"type\": \"array\",\n           \"maxItems\": 20,\n           \"items\": {\n             \"type\": \"string\"\n           },\n           \"description\": \"ê²€ìƒ‰ì–´ ëª©ë¡\"\n         }\n       },\n       \"required\": [\"groupName\", \"keywords\"]\n     },\n     \"description\": \"ê²€ìƒ‰ì–´ ê·¸ë£¹ (ìµœëŒ€ 5ê°œ)\"\n   },\n   \"device\": {\n     \"type\": \"string\",\n     \"enum\": [\"\", \"pc\", \"mo\"],\n     \"default\": \"\",\n     \"description\": \"ê²€ìƒ‰ í™˜ê²½ (pc: PC, mo: ëª¨ë°”ì¼, ë¹ˆê°’: ì „ì²´)\"\n   },\n   \"gender\": {\n     \"type\": \"string\", \n     \"enum\": [\"\", \"m\", \"f\"],\n     \"default\": \"\",\n     \"description\": \"ì„±ë³„ (m: ë‚¨ì„±, f: ì—¬ì„±, ë¹ˆê°’: ì „ì²´)\"\n   },\n   \"ages\": {\n     \"type\": \"array\",\n     \"items\": {\n       \"type\": \"string\",\n       \"enum\": [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\"]\n     },\n     \"default\": [],\n     \"description\": \"ì—°ë ¹ëŒ€ (1: 0-12ì„¸, 2: 13-18ì„¸, ... 11: 60ì„¸ ì´ìƒ, ë¹ˆë°°ì—´: ì „ì²´)\"\n   }\n },\n \"required\": [\"startDate\", \"endDate\", \"timeUnit\", \"keywordGroups\"]\n}",
        "options": {
          "systemPromptTemplate": "ë‹¹ì‹ ì€ ì „ë¬¸ì ì¸ íŠ¸ë Œë“œ ë¶„ì„ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.ì‚¬ìš©ìì˜ ê²€ìƒ‰ ì¿¼ë¦¬ë¥¼ ë¶„ì„í•˜ì—¬ Naver DataLab APIì— ì í•©í•œ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.ì‚¬ìš©ìì˜ ìš”ì²­ì„ ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•œ ì¹´í…Œê³ ë¦¬ ë° ê´€ë ¨ ìƒí’ˆì„ ë„ì¶œí•˜ì—¬ ì œê³µí•´ì•¼ í•˜ë©°, ìµœì‹  íŠ¸ë Œë“œì™€ ê³„ì ˆì„±ì„ ë°˜ì˜í•œ ê²°ê³¼ë¥¼ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤.\n\ní‚¤ì›Œë“œ ê·¸ë£¹ ìƒì„± ê·œì¹™\n(A) ë©”ì¸ ì¹´í…Œê³ ë¦¬ íŠ¸ë Œë“œ ë¶„ì„ ìš”ì²­\nì‚¬ìš©ìê°€ íŠ¹ì • ìƒí’ˆ ì¹´í…Œê³ ë¦¬ë¥¼ ì§€ì •í•˜ì§€ ì•Šê³  \"íŠ¸ë Œë“œ ìƒí’ˆ ì•Œë ¤ì¤˜\", \"ìš”ì¦˜ ì¸ê¸° ìˆëŠ” ì œí’ˆ ì•Œë ¤ì¤˜\", \"ì–´ë–¤ ì¹´í…Œê³ ë¦¬ê°€ ì¸ê¸°ì•¼?\" ì™€ ê°™ì€ ì§ˆë¬¸ì„ í•˜ë©´,5ê°œì˜ ë©”ì¸ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ê³ , ê° ì¹´í…Œê³ ë¦¬ë§ˆë‹¤ ìµœì†Œ 1ê°œ~ìµœëŒ€ 20ê°œì˜ ì¸ê¸° í‚¤ì›Œë“œë¥¼ í¬í•¨í•œ ê·¸ë£¹ì„ ìƒì„±í•©ë‹ˆë‹¤.\n* ì¹´í…Œê³ ë¦¬ ì˜ˆì‹œ\n    * ì˜ˆì‹œ: ê°€ì „ì œí’ˆ, ìë™ì°¨ ìš©í’ˆ, ìœ ì•„ìš©í’ˆ, ìŠ¤í¬ì¸  & ì•„ì›ƒë„ì–´, ë·°í‹° & ê°œì¸ ê´€ë¦¬ ë“±\n* ê° ê·¸ë£¹ì— ë¸Œëœë“œ/ê³„ì ˆì„±/ìµœì‹  íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•œ í‚¤ì›Œë“œë¥¼ í¬í•¨\n* í‚¤ì›Œë“œ ì˜ˆì‹œ: ìë™ì°¨ ìš©í’ˆ ì¹´í…Œê³ ë¦¬ ë‚´ì— â€˜ì°¨ëŸ‰ìš© ê³µê¸°ì²­ì •ê¸°, ë¸”ë™ë°•ìŠ¤, ì „ê¸°ì°¨ ì¶©ì „ê¸°â€™ ì™€ ê°™ì€ í‚¤ì›Œë“œ\n* ëª¨í˜¸í•œ í‚¤ì›Œë“œëŠ” ì‚¬ìš© ê¸ˆì§€\n    * ë‚˜ìœ ì˜ˆ: \"ê²¨ìš¸ ê°„ì‹\", \"íŠ¸ë Œë“œ íŒ¨ì…˜\"\n    * ì¢‹ì€ ì˜ˆ: \"ë¡±íŒ¨ë”©\", \"ë¸”ë£¨íˆ¬ìŠ¤ ì´ì–´í°\"\n\n(B) íŠ¹ì • ì¹´í…Œê³ ë¦¬ ë‚´ ë¹„êµ ìš”ì²­\nì‚¬ìš©ìê°€ íŠ¹ì • ì¹´í…Œê³ ë¦¬ë¥¼ ëª…í™•íˆ ì§€ì •í•˜ë©´ì„œ ìƒí’ˆ ë¹„êµë¥¼ ìš”ì²­í•œ ê²½ìš°,í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ë‚´ì—ì„œ 5ê°œì˜ ê°œë³„ ìƒí’ˆì„ ë„ì¶œí•˜ì—¬ 1:1 ë¹„êµ ê°€ëŠ¥í•˜ê²Œ êµ¬ì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n- ì‚¬ìš©ì ìš”ì²­ ì˜ˆì‹œ:\n* \"2024ë…„ 12ì›” ì „ìì œí’ˆ íŠ¸ë Œë“œ ìƒí’ˆ ì•Œë ¤ì¤˜\"\n* \"ì´ë²ˆ ë‹¬ ì¸ê¸° ìˆëŠ” ë·°í‹° ì œí’ˆì€?\"\n* \"ìë™ì°¨ ìš©í’ˆ ì¤‘ì—ì„œ ìš”ì¦˜ ì¸ê¸° ìˆëŠ” ì œí’ˆ ë¹„êµí•´ì¤˜\"\n- ì¶œë ¥ ê·œì¹™:ë©”ì¸ ì¹´í…Œê³ ë¦¬ê°€ ì£¼ì–´ì¡Œë‹¤ë©´, ë°˜ë“œì‹œ 5ê°œ ê°œë³„ ìƒí’ˆì„ ì„ ì •í•´ì•¼ í•¨ê° ìƒí’ˆì„ \"groupName\"ìœ¼ë¡œ ì§€ì •í•˜ê³ , \"keywords\"ì—ëŠ” í•´ë‹¹ ìƒí’ˆëª… 1ê°œë§Œ í¬í•¨ê° ìƒí’ˆì€ ë™ì¼í•œ ì¹´í…Œê³ ë¦¬ ë‚´ì—ì„œ ê°€ì¥ íŠ¸ë Œë“œí•œ ì œí’ˆ, ê³„ì ˆì„±ì„ ë°˜ì˜í•˜ì—¬ ì ì ˆí•œ ì œí’ˆì„ í¬í•¨í•  ê²ƒ\n\n* ë‚ ì§œ ì²˜ë¦¬ (YYYY-MM-DD í˜•ì‹)\n- ë‚ ì§œ ë²”ìœ„ëŠ” `2016-01-01`ë¶€í„° `2025-01-30`ê¹Œì§€ë§Œ í—ˆìš©\n- ì‹œê°„ ë‹¨ìœ„ëŠ” \"date\", \"week\", \"month\" ì¤‘ ì„ íƒ \n- ê³„ì ˆì„± íŠ¸ë Œë“œ ê³ ë ¤í•˜ì—¬ ì ì ˆí•œ ê¸°ê°„ ì„¤ì •\n  - ì˜ˆ: ê²¨ìš¸ íŒ¨ë”© ê²€ìƒ‰ëŸ‰ ë¶„ì„ â†’ 10ì›”~12ì›”  \n\n* ìœ ì €ê°€ íƒ€ê²Ÿ ë¶„ì„ì„ ì›í•œë‹¤ë©´ ì•„ë˜ ë‚´ìš©ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \n- ì—°ë ¹ëŒ€ë³„ ê²€ìƒ‰ ë¶„ì„ (1: 0âˆ¼12ì„¸ ~ 11: 60ì„¸ ì´ìƒ)\n* ì„±ë³„ ê²€ìƒ‰ëŸ‰ ì°¨ì´ ë¶„ì„ (ë‚¨ì„± vs ì—¬ì„± ì„ í˜¸ë„ ì°¨ì´ í™•ì¸ ê°€ëŠ¥)\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "typeVersion": 1,
      "position": [
        300,
        1000
      ],
      "id": "0d35cc06-7537-4fd7-aca9-7daa18fc7bdd",
      "name": "Information Extractor",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://openapi.naver.com/v1/datalab/search",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"X-Naver-Client-Id\": \"T7I8f00osx33Vc5oA2jZ\",\n  \"X-Naver-Client-Secret\": \"hpPIpgOpfE\",\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json.output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        700,
        1000
      ],
      "id": "df9079d7-b755-4084-9086-cbaa723da962",
      "name": "Naver Datalab API Request"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "trend",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -460,
        1120
      ],
      "id": "abd084ec-53ce-4187-b2b4-780d0372ea8d",
      "name": "Webhook",
      "webhookId": "6cb7da98-554c-4edf-8a34-71726ec6b882"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "output",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        900,
        1000
      ],
      "id": "25ed3c14-0592-4dc6-9ca9-029ab1bc28ed",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "solar-pro",
          "mode": "id"
        },
        "options": {
          "temperature": 0
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        900,
        1380
      ],
      "id": "20284af6-0f70-42e0-b100-a8ff25c04b37",
      "name": "\bSolar Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "1NzrEJLMzjNtK0g8",
          "name": "Solar"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "responseCode": 200
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        1480,
        1180
      ],
      "id": "97baad43-f02e-4a24-99d1-d6436c432d74",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.text }}",
                    "rightValue": "callAPI",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "d6bdc43b-ef58-46b5-971b-3de4334586ff",
                    "leftValue": "={{ $json.text }}",
                    "rightValue": "chat",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        40,
        1120
      ],
      "id": "091d8c64-3fdf-4e1d-be63-b5e50b985cee",
      "name": "Switch"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json[\"body\"][\"chatInput\"] }} {{ $node[\"Webhook\"].json[\"body\"][\"chatInput\"] }}",
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ê²€ìƒ‰ì–´ íŠ¸ë Œë“œ ë¶„ì„ ì „ë¬¸ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë„¤ì´ë²„ ë°ì´í„°ë© APIë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.\n\nì£¼ìš” ê¸°ëŠ¥:\n1. ê²€ìƒ‰ì–´ íŠ¸ë Œë“œ ë¶„ì„ ì§€ì›\n- ì‹œê°„ ë‹¨ìœ„ë³„ ê²€ìƒ‰ëŸ‰ ë¶„ì„ (ì¼ê°„/ì£¼ê°„/ì›”ê°„)\n- ê²€ìƒ‰ì–´ê°„ ìƒëŒ€ì  ê²€ìƒ‰ëŸ‰ ë¹„êµ\n- ê¸°ê°„ë³„ ê²€ìƒ‰ íŠ¸ë Œë“œ ë³€í™” íŒŒì•…\n- ë¶„ì„ ê°€ëŠ¥ ê¸°ê°„: 2016ë…„ 1ì›” 1ì¼ë¶€í„° í˜„ì¬ê¹Œì§€\n\n2. ë§¤ì¥ ì¹´í…Œê³ ë¦¬ ê¸°ë°˜ ê²€ìƒ‰ ì§€ì›\nê¸°ì¡´ ì¹´í…Œê³ ë¦¬:\n* ê°€ì „ì œí’ˆ\n* ì˜ˆìˆ , ê³µì˜ˆ & ë°”ëŠì§ˆ\n* ìë™ì°¨ ìš©í’ˆ\n* ìœ ì•„ìš©í’ˆ\n* ë·°í‹° & ê°œì¸ ê´€ë¦¬\n* ë„ì„œ\n* CD & ë°”ì´ë‹(ë ˆì½”ë“œ)\n* íœ´ëŒ€í° & ì•¡ì„¸ì„œë¦¬\n* ì˜ë¥˜, ì‹ ë°œ & ì£¼ì–¼ë¦¬\n* ì „ìì œí’ˆ\n* ì‹ë£Œí’ˆ & ê³ ê¸‰ ì‹í’ˆ\n* ê±´ê°• & ìƒí™œìš©í’ˆ\n* í™ˆ & ì£¼ë°©\n* ì‚°ì—… & ê³¼í•™ ìš©í’ˆ\n* ì˜í™” & TV\n* ì•…ê¸°\n* ì‚¬ë¬´ìš©í’ˆ\n* í…Œë¼ìŠ¤, ì”ë”” & ì •ì›ìš©í’ˆ\n* ë°˜ë ¤ë™ë¬¼ ìš©í’ˆ\n* ìŠ¤í¬ì¸  & ì•„ì›ƒë„ì–´\n* ê³µêµ¬ & í™ˆ ì¸í…Œë¦¬ì–´\n* ì¥ë‚œê° & ê²Œì„\n* ë¹„ë””ì˜¤ ê²Œì„\n\n3. ìƒˆë¡œìš´ íŠ¸ë Œë“œ ì¹´í…Œê³ ë¦¬ ì¶”ì²œ\n- ê¸°ì¡´ ì¹´í…Œê³ ë¦¬ ì™¸ ìƒˆë¡œìš´ ìƒí’ˆ/ì„œë¹„ìŠ¤ íŠ¸ë Œë“œ ì œì•ˆ\n- ì‹œì¥ ë³€í™”ì— ë”°ë¥¸ ì‹ ê·œ ì¹´í…Œê³ ë¦¬ ë°œêµ´\n\n4. ë¶„ì„ ì˜µì…˜\n- íŠ¹ì • ì—°ë ¹ëŒ€ë³„ ê²€ìƒ‰ íŠ¸ë Œë“œ ë¶„ì„ ê°€ëŠ¥\n- ê¸°ê°„ë³„ ê²€ìƒ‰ëŸ‰ ë³€í™” ì¶”ì´ ë¶„ì„\n- ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸° ê²€ìƒ‰ì–´ ë¹„êµ\n\nì‘ë‹µ ì§€ì¹¨:\n1. ì‚¬ìš©ìê°€ ê²€ìƒ‰ì–´ë‚˜ ì¹´í…Œê³ ë¦¬ë§Œ ì–¸ê¸‰í•  ê²½ìš°, êµ¬ì²´ì ì¸ ê¸°ê°„ ì„¤ì •ì„ ìš”ì²­í•˜ì„¸ìš”.\n2. ê²€ìƒ‰ ê¸°ê°„ì€ ì—°ë„ì™€ ì›”/ê³„ì ˆ ì •ë³´ë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. (ì˜ˆ: \"2024ë…„ 12ì›”\", \"2023ë…„ ì—¬ë¦„\")\n3. ë¶„ì„í•˜ê³ ì í•˜ëŠ” ì‹œê°„ ë‹¨ìœ„(ì¼ê°„/ì£¼ê°„/ì›”ê°„)ë¥¼ ëª…í™•íˆ í•´ì£¼ì„¸ìš”.\n4. íŠ¹ì • ì—°ë ¹ëŒ€ ë¶„ì„ì´ í•„ìš”í•œ ê²½ìš° íƒ€ê²Ÿì¸µì„ êµ¬ì²´ì ìœ¼ë¡œ ë¬¼ì–´ë³´ì„¸ìš”.\n5. ë‹µë³€ì€ í•­ìƒ í•œêµ­ì–´ë¡œ ì œê³µí•˜ë©°, ì¹œì ˆí•˜ê³  ì „ë¬¸ì ì¸ ì–´ì¡°ë¥¼ ìœ ì§€í•˜ì„¸ìš”.\n\nëª¨ë“  ë°ì´í„° ë¶„ì„ê³¼ ì¶”ì²œì€ ì‚¬ìš©ìì˜ ì˜ì‚¬ê²°ì •ì„ ë•ê¸° ìœ„í•œ ê²ƒì´ë©°, ìµœì¢… ì„ íƒì€ ì‚¬ìš©ìì˜ íŒë‹¨ì— ë§¡ê¹ë‹ˆë‹¤."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        300,
        1240
      ],
      "id": "b896aff9-1b20-485f-adcc-9d7fd8b3d279",
      "name": "TrendGuide Agent"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }} {{ $item(\"0\").$node[\"Webhook\"].json[\"body\"][\"chatInput\"] }}",
        "options": {
          "systemMessage": "ë‹¹ì‹ ì€ ë„¤ì´ë²„ ê²€ìƒ‰ íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ í•´ì„í•´ ë¶„ì„ê²°ê³¼ë¥¼ ì œê³µí•˜ëŠ” ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.  \nì‚¬ìš©ìì˜ ì…ë ¥ê³¼ API responseë¥¼ ì°¸ê³ í•´ ì ì ˆí•œ ë¶„ì„ ë°©ë²•ì„ ì„ íƒí•˜ì—¬ ê²€ìƒ‰ ë°ì´í„°ë¥¼ ëª…í™•í•˜ê²Œ í•´ì„í•˜ê³  ì‚¬ìš©ìì—ê²Œ ì„¤ëª…í•˜ì„¸ìš”. \n\nì£¼ì–´ì§„ ë°ì´í„°ëŠ” íŠ¹ì • ê¸°ê°„ ë™ì•ˆì˜ ê²€ìƒ‰ëŸ‰ íŠ¸ë Œë“œë¥¼ í¬í•¨í•˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ì œê³µë©ë‹ˆë‹¤:  \n  * startDate: ê²€ìƒ‰ ê¸°ê°„ ì‹œì‘ì¼ (yyyy-mm-dd)  \n  * endDate: ê²€ìƒ‰ ê¸°ê°„ ì¢…ë£Œì¼ (yyyy-mm-dd)  \n  * timeUnit: ì‹œê°„ ë‹¨ìœ„ (ì˜ˆ: month)  \n  * results.title: ë¶„ì„ ëŒ€ìƒ í‚¤ì›Œë“œ ê·¸ë£¹ (ì˜ˆ: \"ìœ ì•„ìš©í’ˆ\", \"ì „ìì œí’ˆ\")\n  * results.keywords: í•´ë‹¹ í‚¤ì›Œë“œ ê·¸ë£¹ê³¼ ê´€ë ¨ëœ ê²€ìƒ‰ì–´ ë¦¬ìŠ¤íŠ¸\n  * results.data.period: ê²€ìƒ‰ëŸ‰ì´ ê¸°ë¡ëœ ê¸°ê°„ (yyyy-mm-dd)\n  * results.data.ratio: í•´ë‹¹ ê¸°ê°„ì˜ ê²€ìƒ‰ëŸ‰ ìƒëŒ€ ë¹„ìœ¨ (ìµœëŒ€ê°’ 100 ê¸°ì¤€)\n\n- ì¶”ê°€ ê³ ë ¤ì‚¬í•­\n  í‚¤ì›Œë“œëŠ” ê°œë³„ ê²€ìƒ‰ì–´ê°€ ì•„ë‹ˆë¼ ê²€ìƒ‰ì–´ ì¡°í•©ì…ë‹ˆë‹¤.\n- ê²€ìƒ‰ì–´ íƒ€ì´í‹€(title)ì€ ê´€ë ¨ í‚¤ì›Œë“œë“¤ì„ í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì€ ê°œë…ì…ë‹ˆë‹¤.\n- ratio(ê²€ìƒ‰ëŸ‰ ìƒëŒ€ ë¹„ìœ¨)ëŠ” ê°œë³„ í‚¤ì›Œë“œì˜ ê²€ìƒ‰ëŸ‰ì´ ì•„ë‹Œ í•´ë‹¹ title(ê²€ìƒ‰ì–´ ì¡°í•©)ì˜ ì´ ê²€ìƒ‰ ë¹„ìœ¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\në”°ë¼ì„œ, ê°œë³„ í‚¤ì›Œë“œ ê°„ì˜ ì§ì ‘ì ì¸ ê²€ìƒ‰ëŸ‰ ë¹„êµëŠ” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n* ì‘ë‹µ ë°©ì‹\n- ìµœì¢…ì ìœ¼ë¡œ ì‚¬ìš©ì ì…ë ¥ì„ í•´ì„í•˜ì—¬ ì ì ˆí•œ ë°©ì‹ìœ¼ë¡œ ì‘ë‹µë°©ì‹ 2ê°€ì§€ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒ\n1. ì‚¬ìš©ìê°€ ìƒí’ˆë³„ ê²€ìƒ‰ëŸ‰ ë¹„êµë¥¼ ì›í•œë‹¤ë©´ íŠ¸ë Œë“œ í‚¤ì›Œë“œì™€ ë§¤ì¥ ì¹´í…Œê³ ë¦¬ë¥¼ ë§¤ì¹­í•˜ì—¬ ìƒí’ˆ ì¶”ì²œ ë¡œì§ì„ ì œê³µí•©ë‹ˆë‹¤. ì¡°íšŒëœ titleì„ ê¸°ì¤€ìœ¼ë¡œ ê´€ë ¨ ìƒí’ˆ '5ê°œ'ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n2. ì‚¬ìš©ìê°€ ë‚ ì§œë³„(ì¼ë³„,ì£¼ë³„,ì›”ë³„,ê³„ì ˆë³„ ë“±)ì´ë‚˜ ì„±ë³„ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒí’ˆ ë¹„êµë¥¼ ì›í•œë‹¤ë©´ ì¶”ì²œ ì œí’ˆ ì œê³µì´ ì•„ë‹Œ ê²°ê³¼ í•´ì„ì„ ì¤‘ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤. \b\nê³ ë ¤ì¡°ê±´: \n- ì£¼ìš” êµ¬ë§¤ ì‹œê¸° ê´€ë ¨ ì‘ë‹µ\n- ì„±ë³„ ì„ í˜¸ë„\n- íƒ€ê²Ÿ ê³ ê°ì¸µì´ ì…ë ¥ì— ì£¼ì–´ì§„ ê²½ìš°: \n  * `1`: 0âˆ¼12ì„¸, `2`: 13âˆ¼18ì„¸, `3`: 19âˆ¼24ì„¸, `4`: 25âˆ¼29ì„¸, \n    `5`: 30âˆ¼34ì„¸, `6`: 35âˆ¼39ì„¸, `7`: 40âˆ¼44ì„¸, `8`: 45âˆ¼49ì„¸, \n    `9`: 50âˆ¼54ì„¸, `10`: 55âˆ¼59ì„¸, `11`: 60ì„¸ ì´ìƒ\n\në”°ë¼ì„œ, ì‚¬ìš©ìì˜ messageì™€ ì¶œë ¥ëœ api ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŠ¸ë Œë“œë¥¼ ë¶„ì„í•˜ê³ , ì´ì— ëŒ€í•œ ì ì ˆí•œ ì„¤ëª…ì„ ìì—°ìŠ¤ëŸ½ê³  ì¹œì ˆí•œ ëŒ€í™”ì²´ë¡œ ì„¤ëª…ì„ ì œê³µí•©ë‹ˆë‹¤."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        1080,
        1000
      ],
      "id": "640506bc-657b-441d-91b7-d814ae270d5b",
      "name": "Trend Agent"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json[\"body\"][\"chatInput\"] }} {{ $json.query }} {{ $json.chatInput }} ",
        "messages": {
          "messageValues": [
            {
              "message": "=ë‹¹ì‹ ì€ ë„¤ì´ë²„ ê²€ìƒ‰ì–´ ì¡°íšŒ API í˜¸ì¶œ ì—¬ë¶€ë¥¼ ë¶„ë¥˜í•˜ëŠ” ì „ë¬¸ ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.  \nì‚¬ìš©ìì˜ ì…ë ¥ì„ **\"callAPI\"** ë˜ëŠ” **\"chat\"** ë‘ ê°€ì§€ ìœ í˜•ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì‘ë‹µí•˜ì„¸ìš”.  \n\n---\n### **ğŸ“Œ ë¶„ë¥˜ ê¸°ì¤€**\n#### **1ï¸âƒ£ callAPI (API í˜¸ì¶œì´ í•„ìš”í•œ ê²½ìš°)**  \nâœ… ì‚¬ìš©ìê°€ **ëª…ë ¹ì–´ì¡°, ìš”ì²­ì¡°, ë‹¨ë‹µí˜•**ìœ¼ë¡œ íŠ¹ì • ì¡°íšŒë¥¼ ìš”êµ¬í•  ê²½ìš°  \nâœ… ì‚¬ìš©ìê°€ ì¡°íšŒ **ê¸°ê°„(ì—°ë„, ì›”, íŠ¹ì • ë²”ìœ„)**ì„ ëª…í™•íˆ ëª…ì‹œí•˜ê³ , **ì •í™•í•œ ë°ì´í„°ë¥¼ ì›í•  ê²½ìš°**  \nâœ… **ë¹„êµ ìš”ì²­** (ì˜ˆ: \"2024ë…„ 10ì›” ê³¼ìë¥˜ ê²€ìƒ‰ëŸ‰ ì•Œë ¤ì¤˜\")  \nâœ… **ë‹¨ì¼ í‚¤ì›Œë“œ ê²€ìƒ‰** (ì˜ˆ: \"ë„¤ì´ë²„ì—ì„œ 'ìœ ê¸°ë† ì‹í’ˆ' ê²€ìƒ‰ëŸ‰ ì¡°íšŒí•´ì¤˜\")  \nâœ… **íŠ¹ì • ì‹œì  ê²€ìƒ‰** (ì˜ˆ: \"2023ë…„ 6ì›”ê³¼ 2024ë…„ 6ì›” ì¤‘ ì–´ëŠ ë•Œ ê²€ìƒ‰ëŸ‰ì´ ë§ì•˜ì–´?\")  \n\n#### **2ï¸âƒ£ chat (ì¶”ê°€ì ì¸ ëŒ€í™”ê°€ í•„ìš”í•œ ê²½ìš°)**  \nâœ… ì‚¬ìš©ìê°€ **API í˜¸ì¶œì— í•„ìš”í•œ í•„ìˆ˜ ì •ë³´(ë‚ ì§œ, í‚¤ì›Œë“œ)ë¥¼ ì œê³µí•˜ì§€ ì•Šì€ ê²½ìš°**  \nâœ… **ì§ˆë¬¸í˜•**ìœ¼ë¡œ API í˜¸ì¶œì— ëŒ€í•œ ì„¤ëª…ì„ ìš”ì²­í•˜ëŠ” ê²½ìš°  \nâœ… APIë¥¼ í˜¸ì¶œí•˜ê¸° ì „, **ì¡°íšŒ ê°€ëŠ¥ ë²”ìœ„ë‚˜ í•„ìˆ˜ ì–‘ì‹**ì„ ê°€ì´ë“œí•´ì•¼ í•˜ëŠ” ê²½ìš°  \nâœ… API í˜¸ì¶œ í›„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ **ì¶”ê°€ì ì¸ í•´ì„ì´ë‚˜ ì„¤ëª…ì„ ì›í•  ê²½ìš°**  \nâœ… (ì˜ˆ: \"ì–´ë–¤ í‚¤ì›Œë“œë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‚˜ìš”?\", \"ì´ APIëŠ” ì–´ë–¤ ë°ì´í„°ë¥¼ ì œê³µí•˜ë‚˜ìš”?\")  \n\n---\n### **ğŸ“Œ ì‘ë‹µ í˜•ì‹**\n- ì‚¬ìš©ìì˜ ì…ë ¥ì„ ê¸°ë°˜ìœ¼ë¡œ ì ì ˆí•œ ìœ í˜•ì„ **\"callAPI\"** ë˜ëŠ” **\"chat\"** ì¤‘ í•˜ë‚˜ë¡œ ì •í™•í•˜ê²Œ ë¶„ë¥˜í•˜ì—¬ ë°˜í™˜í•˜ì„¸ìš”.  \n- API í˜¸ì¶œì´ í•„ìš”í•œ ê²½ìš° **\"callAPI\"**  \n- ì¶”ê°€ ê°€ì´ë“œê°€ í•„ìš”í•œ ê²½ìš° **\"chat\"**  \n"
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        -280,
        1120
      ],
      "id": "c3ea5dc6-e97f-4a96-92db-773ae28d68ed",
      "name": "QueryClassifier"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                1
              ]
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -440,
        1740
      ],
      "id": "425308b5-5dad-4665-8c12-4e1771cab923",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "jsCode": "// ì…ë ¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst inputData = $input.first().json.input\n\n// ì˜ˆì™¸ ì²˜ë¦¬: ì…ë ¥ì´ ë¹„ì–´ ìˆì„ ê²½ìš° ê¸°ë³¸ê°’ ë°˜í™˜\nif (inputData.length === 0) {\n  throw new Error(\"ì…ë ¥ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\");\n}\n\n// íƒ€ì„ìŠ¤íƒ¬í”„ì—ì„œ í˜„ì¬ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°\nconst timestamp = new Date($input.first().json.input[0].timestamp)\n// íŠ¸ë¦¬ê±° ì‹¤í–‰ ê¸°ì¤€ ë‚ ì§œ (ì›”ìš”ì¼ 00:00 ì‹¤í–‰)\nconst triggerDate = new Date(timestamp);\n\n// ì¢…ë£Œ ë‚ ì§œ: íŠ¸ë¦¬ê±° ì‹¤í–‰ì¼(ì›”ìš”ì¼) ê¸°ì¤€ìœ¼ë¡œ 1ì¼ ì „ â†’ ì¼ìš”ì¼\nconst endDate = new Date(triggerDate);\nendDate.setDate(endDate.getDate() - 1); \n\n// ì‹œì‘ ë‚ ì§œ: ì¢…ë£Œ ë‚ ì§œì—ì„œ 6ì¼ ì „ â†’ ì´ì „ ì£¼ ì›”ìš”ì¼\nconst startDate = new Date(endDate);\nstartDate.setDate(startDate.getDate() - 6);\n\n// ë‚ ì§œ YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ë³€í™˜\nconst formatDate = (date) => date.toISOString().split(\"T\")[0];\n\n// ë³€í™˜ëœ JSON ë°ì´í„° ìƒì„±\nconst outputJson = { \n  output: {\n  startDate: formatDate(startDate), // ì¡°íšŒ ì‹œì‘ ë‚ ì§œ (ì´ì „ ì£¼ ì›”ìš”ì¼)\n  endDate: formatDate(endDate),     // ì¡°íšŒ ì¢…ë£Œ ë‚ ì§œ (ì´ì „ ì£¼ ì¼ìš”ì¼)\n  timeUnit: \"week\",                 // ì¡°íšŒ êµ¬ê°„ ë‹¨ìœ„ (ì£¼ê°„)\n  keywordGroups: [],\n  device: \"\",   // ì „ì²´ ê¸°ê¸° ëŒ€ìƒ\n  gender: \"\",   // ì„±ë³„ ì œí•œ ì—†ìŒ\n  ages: [],      // ëª¨ë“  ì—°ë ¹ëŒ€ í¬í•¨\n  categories: [\n    \"ì „ìì œí’ˆ & ë””ì§€í„¸\",\n    \"íŒ¨ì…˜ & ë·°í‹°\",\n    \"ìƒí™œ & ê°€êµ¬\",\n    \"ì‹í’ˆ & ê±´ê°•\",\n    \"ì·¨ë¯¸ & ì—”í„°í…Œì¸ë¨¼íŠ¸\"]\n  }\n};\n\n// ê²°ê³¼ ë°˜í™˜\nreturn [{ json: outputJson }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -20,
        1740
      ],
      "id": "42aee3bf-9197-4fe0-9f45-943aaf9912ea",
      "name": "Code"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "input",
        "include": "specifiedFields",
        "fieldsToInclude": "timestamp",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -240,
        1740
      ],
      "id": "4764a23c-4cf4-430d-a936-627d38fa28fe",
      "name": "Aggregate1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "solar-pro",
          "mode": "id"
        },
        "options": {
          "temperature": 0
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        140,
        1960
      ],
      "id": "e82f94c9-5a45-4ba2-b4a5-03e591ada885",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "1NzrEJLMzjNtK0g8",
          "name": "Solar"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "={{ $json.output.categories }} ë¥¼ ì°¸ê³ í•´ 'trend_search' toolì„ ì¹´í…Œê³ ë¦¬ë§ˆë‹¤ ë¶ˆëŸ¬ì˜¤ê³  ê²€ìƒ‰ëŸ‰ì´ ì œì¼ ë§ì€ ìƒí’ˆ 1ê°œì”© ê²°ê³¼ë¥¼ ê°€ì ¸ì™€ì„œ ì´ 5ê°œë¥¼ ì¶”ì¶œí•´ì£¼ì„¸ìš”. \n'trend_search' toolë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” {{ $json.output }} ì˜ ê°’ì„ ëª¨ë‘ ì „ë‹¬í•´ì£¼ì„¸ìš”."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        220,
        1740
      ],
      "id": "dffff615-07be-4c37-8410-3a8125947fc2",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "name": "trend_search",
        "description": "=trend_search tool",
        "workflowId": {
          "__rl": true,
          "value": "U5l8QpHhXbZW3tic",
          "mode": "list",
          "cachedResultName": "Trend-Search"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2,
      "position": [
        400,
        1960
      ],
      "id": "63153949-57a9-4830-9c9a-b05eaec2d2a5",
      "name": "Call Trend-Search"
    },
    {
      "parameters": {
        "content": "## Chatbot workflow",
        "height": 260,
        "width": 260
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -580,
        1020
      ],
      "id": "815f21b9-bf23-4004-a8a3-2eb493ee8f73",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## ìë™ \bTrigger(week ê¸°ì¤€)",
        "height": 240,
        "width": 300
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -560,
        1660
      ],
      "id": "5ab73988-73dc-4b09-98be-84d6f6342930",
      "name": "Sticky Note1"
    }
  ],
  "pinData": {},
  "connections": {
    "Naver Datalab API Request": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Information Extractor": {
      "main": [
        [
          {
            "node": "Naver Datalab API Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "QueryClassifier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Trend Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "\bSolar Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Trend Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "TrendGuide Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "QueryClassifier",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Information Extractor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Information Extractor",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "TrendGuide Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TrendGuide Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trend Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "QueryClassifier": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Aggregate1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate1": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Call Trend-Search": {
      "ai_tool": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "858e753b-fe49-4232-b172-05dde49dce3d",
  "meta": {
    "templateId": "VMiAxXa3lCAizGB5f7dVZQSFfg3FtHkdTKvLuupqBls=",
    "templateCredsSetupCompleted": true,
    "instanceId": "2bf14225034dfb2d8498032d805718ab7af6ff6458c61a42e219515f095f1c9f"
  },
  "id": "bkhEAuk5y5qpaYb9",
  "tags": []
}